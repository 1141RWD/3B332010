<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>異界戰棋 - 主選單</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* 內聯樣式覆蓋，確保背景正確顯示，或者依賴 styles.css */
        body {
            overflow: hidden;
            /* 防止首頁出現捲軸 */
        }
    </style>
</head>

<body>
    <!-- Loading Screen -->
    <div id="loadingOverlay"
        style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #111; z-index: 99999; display: flex; flex-direction: column; justify-content: center; align-items: center; color: #ffd700; font-family: sans-serif;">
        <h2 style="margin-bottom: 20px; text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);">正在載入資源...</h2>
        <div id="loadingText" style="font-size: 24px; font-weight: bold;">0%</div>
        <div
            style="width: 300px; height: 10px; background: #333; margin-top: 15px; border-radius: 5px; overflow: hidden; border: 1px solid #555;">
            <div id="loadingBar"
                style="width: 0%; height: 100%; background: linear-gradient(90deg, #ffd700, #ffcc00); transition: width 0.1s;">
            </div>
        </div>
    </div>
    <script>
        (function () {
            const assets = [
                'assets/battlefield_bg.jpg',
                'assets/king.jpg', 'assets/gen.jpg', 'assets/sol.jpg',
                'assets/arc.jpg', 'assets/mage.jpg', 'assets/can.jpg',
                'assets/obstacle.jpg',
                'assets/effect_explosion.jpg', 'assets/effect_slash.jpg',
                'assets/projectile_arrow.svg', 'assets/projectile_fireball.svg',
                'assets/projectile_cannonball.svg', 'assets/projectile_slash.svg'
            ];
            let loaded = 0;
            const total = assets.length;

            function updateProgress() {
                const percent = Math.floor((loaded / total) * 100);
                const bar = document.getElementById('loadingBar');
                const text = document.getElementById('loadingText');
                if (bar) bar.style.width = percent + '%';
                if (text) text.textContent = percent + '%';

                if (loaded >= total) {
                    setTimeout(() => {
                        const overlay = document.getElementById('loadingOverlay');
                        if (overlay) {
                            overlay.style.transition = 'opacity 0.5s';
                            overlay.style.opacity = '0';
                            setTimeout(() => overlay.remove(), 500);
                        }
                    }, 500);
                }
            }

            assets.forEach(src => {
                const img = new Image();
                img.onload = () => { loaded++; updateProgress(); };
                img.onerror = () => { console.warn('Asset failed:', src); loaded++; updateProgress(); }; // Still count to unblock
                img.src = src;
            });
        })();
    </script>
    <div class="menu-container">
        <h1 class="menu-title">異界戰棋</h1>
        <div class="menu-buttons">
            <a href="single_player.html" class="menu-btn">單人遊戲</a>
            <a href="game.html" class="menu-btn">雙人對戰</a>
            <a href="formation_editor.html" class="menu-btn">部陣編輯</a>
            <a href="rules.html" class="menu-btn">規則說明</a>
        </div>
    </div>
</body>

</html>